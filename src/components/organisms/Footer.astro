---
import { CONTACT_ID_TO_DATA, type Contact } from "@/data/me";
import FooterItem from "@/components/atoms/footer/FooterItem.astro";
import { FOOTER_SECTIONS } from "@/data/footer";

const github = CONTACT_ID_TO_DATA.github as Contact;
---

<footer class="bg-secondary-purple-900 py-12">
  <div class="container mx-auto px-6">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-8">
      {
        FOOTER_SECTIONS.map((section) => (
          <div class="footer-col">
            <h3 class="footer-heading">{section.heading}</h3>

            {section.type === "text" ? (
              <p class="footer-text">{section.content}</p>
            ) : (
              <div
                class={
                  section.items && section.items.length > 1
                    ? "space-y-3"
                    : undefined
                }
              >
                {section.items?.map((item) => (
                  <FooterItem
                    label={item.label}
                    url={item.url}
                    iconPath={item.iconPath}
                  />
                ))}
              </div>
            )}
          </div>
        ))
      }
    </div>

    <!-- Copyright -->
    <div
      class="border-t border-(--secondary-purple-400) pt-6 text-center text-neutral-gray-500"
    >
      <a target="_blank" rel="noopener noreferrer" href={github.url}>
        © 2025 Copyright: Antonio Martínez Fernández</a
      >
    </div>
  </div>
</footer>

<style>
  @reference "tailwindcss";

  :global(.footer-text) {
    font-size: 1rem;
    color: var(--neutral-gray-300);
  }

  .footer-col {
    @apply mx-auto;
  }

  .footer-heading {
    @apply text-lg font-bold mb-4;
    color: var(--neutral-gray-200);
  }

  :global(.footer-item) {
    @apply flex items-center gap-2;
    color: var(--neutral-gray-300);
  }
  :global(.footer-item:hover) {
    color: var(--accent-orange-500) !important;
  }
  :global(.footer-item:hover .footer-icon) {
    /* apply the accent-orange filter on hover (overrides brightness-0 invert) */
    filter: brightness(0) saturate(100%) invert(65%) sepia(66%) saturate(2515%)
      hue-rotate(360deg) brightness(102%) contrast(101%);
  }

  :global(.footer-icon) {
    @apply w-5 h-5 brightness-0 invert;
    /* smooth transition when filter changes on hover */
    transition: filter 200ms ease;
  }

  :global(.footer-link) {
    @apply transition-colors;
    color: inherit;
  }

  @media (min-width: 1536px) {
    :global(.footer-text) {
      font-size: 1.2rem;
    }
  }
</style>
